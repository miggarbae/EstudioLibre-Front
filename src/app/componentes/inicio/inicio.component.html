<div class="container my-4">
    <h1 class="text-center mb-4">ğŸ“‚ Archivos Disponibles</h1>
  
    <!-- Botones de Login/Registro -->
    <div class="text-center mb-3" *ngIf="!usuarioLogeado">
      <button class="btn btn-primary me-2" (click)="irALogin()">ğŸ”‘ Login</button>
      <button class="btn btn-success" (click)="irARegistro()">ğŸ“ RegÃ­strate</button>
    </div>
  
    <!-- BotÃ³n de Logout -->
    <div *ngIf="usuarioLogeado" class="text-center mb-4">
      <button class="btn btn-outline-danger" (click)="logout()">ğŸšª Cerrar sesiÃ³n</button>
    </div>
  
    <!-- Rol del Usuario -->
    <div *ngIf="rolUsuario === 'ADMIN'" class="alert alert-info">
      ğŸ‘‘ <strong>Administrador:</strong> Tienes acceso completo al sistema.
    </div>
    <div *ngIf="rolUsuario === 'USER'" class="alert alert-success">
      ğŸ™‹ <strong>Usuario:</strong> Puedes buscar, descargar y comentar archivos.
    </div>
  
    <!-- Buscador -->
    <div class="input-group mb-4">
      <input type="text" class="form-control" [(ngModel)]="terminoBusqueda"
             (input)="buscarEnTiempoReal()" placeholder="Buscar archivos por nombre, asignatura, nivel o descripciÃ³n..." />
      <button class="btn btn-outline-secondary" type="button" (click)="buscarEnTiempoReal()">ğŸ” Buscar</button>
    </div>
  
    <!-- Lista de archivos -->
    <div *ngIf="archivos.length === 0" class="text-center text-muted">No hay archivos disponibles.</div>
  
    <ul class="list-group">
      <li *ngFor="let archivo of archivos" class="list-group-item mb-3 shadow-sm rounded">
        <div class="d-flex justify-content-between align-items-center">
          <h4 class="mb-0">{{ archivo.nombre }}</h4>
          <span class="badge bg-primary">{{ archivo.nivelEstudio }}</span>
        </div>
        <p class="mb-1"><strong>Asignatura:</strong> {{ archivo.asignatura }}</p>
        <p class="mb-2"><strong>DescripciÃ³n:</strong> {{ archivo.descripcion }}</p>
  
        <!-- Acciones -->
        <div class="d-flex gap-2 flex-wrap">
          <button class="btn btn-outline-primary btn-sm" (click)="descargarArchivo(archivo.id, archivo.nombre, archivo.tipo)">ğŸ“¥ Descargar</button>
          <button class="btn btn-outline-warning btn-sm" (click)="reportarArchivo(archivo)">ğŸš© Reportar</button>
        </div>
  
        <!-- Formulario de reporte -->
        <div *ngIf="archivoSeleccionadoParaReporte?.id === archivo.id" class="bg-light mt-3 p-3 border-start border-warning rounded">
          <label class="form-label"><strong>Selecciona el motivo del reporte:</strong></label>
          <select class="form-select mb-2" [(ngModel)]="motivoSeleccionado">
            <option value="">-- Selecciona una opciÃ³n --</option>
            <option value="contenido inapropiado">Contenido inapropiado</option>
            <option value="archivo daÃ±ado">Archivo daÃ±ado</option>
            <option value="spam">Spam</option>
            <option value="otros">Otros</option>
          </select>
  
          <div *ngIf="motivoSeleccionado === 'otros'">
            <label class="form-label"><strong>Especifica el motivo:</strong></label>
            <textarea class="form-control mb-2" [(ngModel)]="otroMotivo" rows="2"></textarea>
          </div>
  
          <div class="d-flex gap-2">
            <button class="btn btn-success btn-sm" (click)="enviarReporte()">âœ… Enviar</button>
            <button class="btn btn-secondary btn-sm" (click)="archivoSeleccionadoParaReporte = null">âŒ Cancelar</button>
          </div>
        </div>
  
        <!-- Comentarios -->
        <app-comentarios [archivoId]="archivo.id"></app-comentarios>
      </li>
    </ul>
  </div>
  
  <!-- Subida de archivos -->
  <app-subir-archivo></app-subir-archivo>
  